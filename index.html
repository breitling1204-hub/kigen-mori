<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸé™ã®æ£® | AIé£Ÿæç®¡ç†</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f4f7f5; color: #1e293b; }
        .glass-card { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 2rem; border: 1px solid rgba(255, 255, 255, 0.5); }
        .premium-gradient { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .gold-badge { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-5px); } 100% { transform: translateY(0px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [forest, setForest] = useState([]);
            const [isPremium, setIsPremium] = useState(false);
            const [showPremiumModal, setShowPremiumModal] = useState(false);
            const [showLegal, setShowLegal] = useState(false);
            const [name, setName] = useState('');
            const [date, setDate] = useState('');
            const [quantity, setQuantity] = useState('');

            useEffect(() => {
                const saved = localStorage.getItem('kigen_forest_v7');
                if (saved) setForest(JSON.parse(saved));
                const premium = localStorage.getItem('premium_status') === 'true';
                setIsPremium(premium);
            }, []);

            const addTree = () => {
                if (!name || !date) return;
                // ç„¡æ–™ç‰ˆã¯5ã¤ã¾ã§ã«åˆ¶é™ã™ã‚‹ä¾‹ï¼ˆãƒ—ãƒ¬ãƒŸã‚¢ãƒ è¨´æ±‚ï¼‰
                if (!isPremium && forest.length >= 5) {
                    setShowPremiumModal(true);
                    return;
                }
                const newTree = { id: Date.now(), name, date, quantity: quantity || '1' };
                const newForest = [newTree, ...forest];
                setForest(newForest);
                localStorage.setItem('kigen_forest_v7', JSON.stringify(newForest));
                setName(''); setDate(''); setQuantity('');
            };

            const togglePremium = () => {
                const newState = !isPremium;
                setIsPremium(newState);
                localStorage.setItem('premium_status', newState.toString());
                setShowPremiumModal(false);
            };

            const deleteTree = (id) => {
                const newForest = forest.filter(t => t.id !== id);
                setForest(newForest);
                localStorage.setItem('kigen_forest_v7', JSON.stringify(newForest));
            };

            return (
                <div className="max-w-md mx-auto p-6 min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="flex justify-between items-center py-6">
                        <div className="flex items-center gap-2">
                            <div className="bg-emerald-600 p-2 rounded-xl text-white shadow-lg animate-float">ğŸŒ³</div>
                            <h1 className="font-black text-xl tracking-tighter">æœŸé™ã®æ£®</h1>
                        </div>
                        {isPremium ? (
                            <span className="gold-badge text-[10px] font-bold text-white px-3 py-1 rounded-full shadow-sm">PREMIUM</span>
                        ) : (
                            <button 
                                onClick={() => setShowPremiumModal(true)}
                                className="bg-white border border-emerald-100 text-emerald-600 text-[10px] font-black px-3 py-1 rounded-full hover:bg-emerald-50 transition-colors"
                            >
                                UPGRADE
                            </button>
                        )}
                    </header>

                    {/* Main Input */}
                    <div className="glass-card p-6 mb-8 shadow-sm">
                        <h2 className="text-[10px] font-black text-slate-400 mb-4 uppercase tracking-widest">æ–°ã—ã„é£Ÿæã‚’æ¤ãˆã‚‹</h2>
                        <div className="space-y-3">
                            <input 
                                value={name} 
                                onChange={e => setName(e.target.value)} 
                                placeholder="é£Ÿæã®åå‰ (ä¾‹: ãŸã¾ã”)" 
                                className="w-full p-4 bg-white/50 rounded-2xl outline-none font-bold text-sm border border-slate-100 focus:border-emerald-300 transition-all" 
                            />
                            <div className="flex gap-2">
                                <input 
                                    value={quantity} 
                                    onChange={e => setQuantity(e.target.value)} 
                                    placeholder="å€‹æ•°/åˆ†é‡" 
                                    className="w-1/3 p-4 bg-white/50 rounded-2xl outline-none font-bold text-sm border border-slate-100" 
                                />
                                <input 
                                    value={date} 
                                    onChange={e => setDate(e.target.value)} 
                                    type="date" 
                                    className="w-2/3 p-4 bg-white/50 rounded-2xl outline-none font-bold text-sm border border-slate-100" 
                                />
                            </div>
                            <button 
                                onClick={addTree} 
                                className="w-full py-4 premium-gradient text-white rounded-2xl font-black text-sm shadow-md active:scale-95 transition-all"
                            >
                                æ£®ã«è¿½åŠ ã™ã‚‹
                            </button>
                        </div>
                    </div>

                    {/* Forest List */}
                    <div className="flex-1 space-y-3">
                        <div className="flex justify-between items-end mb-2 px-2">
                            <h3 className="font-black text-sm text-slate-600 tracking-tight">ç®¡ç†ä¸­ã®é£Ÿæ</h3>
                            <span className="text-[10px] font-bold text-slate-400">{forest.length} ä»¶</span>
                        </div>
                        
                        {forest.length === 0 && (
                            <div className="text-center py-20 opacity-30">
                                <p className="text-4xl mb-2">ğŸ·ï¸</p>
                                <p className="text-xs font-bold">ã¾ã ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“</p>
                            </div>
                        )}

                        {forest.map(tree => (
                            <div key={tree.id} className="bg-white p-4 rounded-3xl flex items-center gap-4 shadow-sm group">
                                <div className="w-10 h-10 bg-emerald-50 rounded-xl flex items-center justify-center text-emerald-600">
                                    {isPremium ? "ğŸ±" : "ğŸƒ"}
                                </div>
                                <div className="flex-1">
                                    <p className="font-black text-sm text-slate-800 leading-none">{tree.name}</p>
                                    <p className="text-[10px] font-black text-slate-300 mt-1 uppercase">
                                        Limit: <span className={new Date(tree.date) < new Date() ? 'text-rose-500' : ''}>{tree.date}</span>
                                    </p>
                                </div>
                                <div className="text-right">
                                    <p className="text-[10px] font-black text-slate-400">{tree.quantity}</p>
                                    <button onClick={() => deleteTree(tree.id)} className="text-slate-200 hover:text-rose-400 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        ))}

                        {!isPremium && forest.length >= 3 && (
                            <div className="bg-amber-50 border border-amber-100 p-4 rounded-3xl mt-6">
                                <p className="text-[10px] font-black text-amber-700 leading-tight">
                                    ç„¡æ–™ç‰ˆã¯5å€‹ã¾ã§ç™»éŒ²å¯èƒ½ã§ã™ã€‚<br/>ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã§ç„¡åˆ¶é™ã«è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼
                                </p>
                                <button onClick={() => setShowPremiumModal(true)} className="mt-2 text-[10px] font-bold text-amber-600 underline">è©³ç´°ã‚’è¦‹ã‚‹</button>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <footer className="mt-12 text-center pb-8 space-y-4">
                        <button onClick={() => setShowLegal(true)} className="text-[9px] font-bold text-slate-300 uppercase tracking-widest hover:text-slate-400 transition-colors">Legal Notice</button>
                        <p className="text-[8px] text-slate-300 font-medium">Â© 2024 Kigen no Mori AI</p>
                    </footer>

                    {/* Premium Modal */}
                    {showPremiumModal && (
                        <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-md z-50 flex items-end sm:items-center justify-center p-4">
                            <div className="bg-white w-full max-w-sm rounded-[2.5rem] overflow-hidden shadow-2xl">
                                <div className="premium-gradient p-8 text-white text-center">
                                    <p className="text-4xl mb-4">ğŸ’</p>
                                    <h2 className="font-black text-2xl mb-1">Premium Plan</h2>
                                    <p className="text-[10px] font-bold opacity-80 uppercase tracking-widest font-mono">Unlock full potential</p>
                                </div>
                                <div className="p-8 space-y-4">
                                    <ul className="space-y-3">
                                        {[
                                            "é£Ÿæã®ç™»éŒ²ãŒç„¡åˆ¶é™",
                                            "è³å‘³æœŸé™åˆ‡ã‚Œã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥",
                                            "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ é™å®šã‚¢ã‚¤ã‚³ãƒ³",
                                            "åºƒå‘Šã®å®Œå…¨éè¡¨ç¤º"
                                        ].map((text, i) => (
                                            <li key={i} className="flex items-center gap-3 text-xs font-bold text-slate-600">
                                                <span className="text-emerald-500">âœ“</span> {text}
                                            </li>
                                        ))}
                                    </ul>
                                    <div className="pt-4 text-center">
                                        <p className="text-2xl font-black text-slate-900">Â¥300<span className="text-xs text-slate-400"> / month</span></p>
                                    </div>
                                    <button onClick={togglePremium} className="w-full py-4 premium-gradient text-white rounded-2xl font-black text-sm shadow-lg active:scale-95 transition-all">
                                        {isPremium ? "ãƒ—ãƒ©ãƒ³ã‚’è§£ç´„ã™ã‚‹" : "ä»Šã™ãã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰"}
                                    </button>
                                    <button onClick={() => setShowPremiumModal(false)} className="w-full py-2 text-[10px] font-bold text-slate-300 uppercase">Maybe later</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Legal Modal */}
                    {showLegal && (
                        <div className="fixed inset-0 bg-white z-[60] p-8 overflow-y-auto">
                            <div className="max-w-xs mx-auto">
                                <button onClick={() => setShowLegal(false)} className="mb-8 text-slate-400 font-black">â† BACK</button>
                                <h2 className="font-black text-xl mb-8">ç‰¹å®šå•†å–å¼•æ³•ã«<br/>åŸºã¥ãè¡¨è¨˜</h2>
                                <div className="space-y-8 text-xs text-slate-500 leading-relaxed font-medium">
                                    <section>
                                        <p className="font-black text-slate-900 text-[9px] mb-1 uppercase tracking-tighter">è²©å£²æ¥­è€…</p>
                                        <p>ï¼ˆã‚ãªãŸã®ã”æœ¬åï¼‰</p>
                                    </section>
                                    <section>
                                        <p className="font-black text-slate-900 text-[9px] mb-1 uppercase tracking-tighter">ãŠå•ã„åˆã‚ã›å…ˆ</p>
                                        <p>ï¼ˆã‚ãªãŸã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰</p>
                                    </section>
                                    <section>
                                        <p className="font-black text-slate-900 text-[9px] mb-1 uppercase tracking-tighter">è²©å£²ä¾¡æ ¼</p>
                                        <p>æœˆé¡ 300å††ï¼ˆç¨è¾¼ï¼‰</p>
                                    </section>
                                    <section>
                                        <p className="font-black text-slate-900 text-[9px] mb-1 uppercase tracking-tighter">ä»£é‡‘ã®æ”¯æ‰•æ™‚æœŸ</p>
                                        <p>è³¼å…¥ç¢ºå®šæ™‚ã«å³æ™‚æ±ºæ¸ˆã€‚ä»¥é™ã¯å„ãƒ—ãƒ©ãƒ³ã®æ›´æ–°æ—¥ã«åŸºã¥ãã€‚</p>
                                    </section>
                                    <section>
                                        <p className="font-black text-slate-900 text-[9px] mb-1 uppercase tracking-tighter">è¿”å“ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«</p>
                                        <p>ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ€§è³ªä¸Šã€æ±ºæ¸ˆå®Œäº†å¾Œã®è¿”å“ãƒ»è¿”é‡‘ã«ã¯å¿œã˜ã‚‰ã‚Œã¾ã›ã‚“ã€‚</p>
                                    </section>
                                </div>
                                <div className="py-12">
                                    <button onClick={() => setShowLegal(false)} className="w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-xs">åŒæ„ã—ã¦é–‰ã˜ã‚‹</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

